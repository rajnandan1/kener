{"version":3,"file":"0-b9813c04.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/_layout.server.js","../../../.svelte-kit/adapter-node/nodes/0.js"],"sourcesContent":["import fs from \"fs-extra\";\nimport { p as public_env } from \"../../chunks/shared-server.js\";\nconst langMap = {};\nconst files = fs.readdirSync(\"./locales\");\nfor (const file of files) {\n  if (!file.endsWith(\".json\")) {\n    continue;\n  }\n  const lang = file.split(\".\")[0];\n  const data = fs.readFileSync(`./locales/${file}`, \"utf8\");\n  try {\n    langMap[lang] = JSON.parse(data);\n  } catch (err) {\n    console.log(`Error parsing ${file}: ${err}`);\n  }\n}\nfunction mergeEnglish(language, english) {\n  for (let key in english) {\n    if (language[key] === void 0) {\n      language[key] = english[key];\n    }\n    if (typeof language[key] === \"object\") {\n      mergeEnglish(language[key], english[key]);\n    }\n  }\n}\nconst defaultLang = \"en\";\nconst init = (lang) => {\n  let english = langMap[defaultLang];\n  let language = langMap[lang];\n  if (language === void 0) {\n    return english;\n  }\n  mergeEnglish(language, english);\n  return language;\n};\nasync function load({ params, route, url, cookies, request }) {\n  let site = JSON.parse(fs.readFileSync(public_env.PUBLIC_KENER_FOLDER + \"/site.json\", \"utf8\"));\n  const headers = request.headers;\n  const userAgent = headers.get(\"user-agent\");\n  let localTz = \"GMT\";\n  const localTzCookie = cookies.get(\"localTz\");\n  if (!!localTzCookie) {\n    localTz = localTzCookie;\n  }\n  let showNav = true;\n  if (url.pathname.startsWith(\"/embed\")) {\n    showNav = false;\n  }\n  let isBot = false;\n  if (userAgent?.includes(\"Chrome-Lighthouse\") || userAgent?.includes(\"bot\")) {\n    isBot = true;\n  }\n  let selectedLang = \"en\";\n  const localLangCookie = cookies.get(\"localLang\");\n  if (!!localLangCookie && site.i18n?.locales[localLangCookie]) {\n    selectedLang = localLangCookie;\n  } else if (site.i18n?.defaultLocale && site.i18n?.locales[site.i18n.defaultLocale]) {\n    selectedLang = site.i18n.defaultLocale;\n  }\n  return {\n    site,\n    localTz,\n    showNav,\n    isBot,\n    lang: init(String(selectedLang)),\n    selectedLang\n  };\n}\nexport {\n  load\n};\n","import * as server from '../entries/pages/_layout.server.js';\n\nexport const index = 0;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/_layout.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/+layout.server.js\";\nexport const imports = [\"_app/immutable/nodes/0.4f379a4d.js\",\"_app/immutable/chunks/scheduler.36bfad59.js\",\"_app/immutable/chunks/index.76a7851a.js\",\"_app/immutable/chunks/globals.7f7f1b26.js\",\"_app/immutable/chunks/Icon.22c2c156.js\",\"_app/immutable/chunks/index.a41bf830.js\",\"_app/immutable/chunks/index.f836667e.js\",\"_app/immutable/chunks/events.74eec825.js\"];\nexport const stylesheets = [\"_app/immutable/assets/0.1ffe9223.css\"];\nexport const fonts = [];\n"],"names":[],"mappings":"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"}